// Souffle - A Datalog Compiler
// Copyright (c) 2017, The Souffle Developers. All rights reserved
// Licensed under the Universal Permissive License v 1.0 as shown at:
// - https://opensource.org/licenses/UPL
// - <souffle root>/licenses/SOUFFLE-UPL.txt

// Tests inlining with records.

.type Thing

.type Conn = [
    first : Thing,
    second : Thing
]

.decl a(x:Conn, y:Conn) inline
a(*Conn["Hello", "Goodbye"], *Conn["temporary", "value"]).
a(*Conn["temporary", "value"], *Conn["NO", "NO"]).
a(*Conn["can", "do"], *Conn["my", "value"]).

.decl b(x:Conn, y:Conn) inline
b(*Conn["good job", "bad job"], *Conn["can", "do"]).
b(x, y) :- a(x, y), x != *Conn["temporary", "value"].

.decl c(x:Conn) inline
c(x) :- a(z, y), b(x, z), x != y.

.decl d(x:Thing)
d(x) :- c(*Conn[x, _]).
.output d()
